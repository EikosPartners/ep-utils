{"version":3,"sources":["../src/functionRegistry.js"],"names":["functionRegistry","dictionary","register","key","func","get","remove","invoke","functionName","data","options","mockKey","window","IS_MOCK","IS_SERVICE_MOCK","registry","apply","Array","prototype","slice","call","arguments","module","exports"],"mappings":";;AACA,SAASA,gBAAT,GAA4B;AACxB,QAAIC,aAAa,EAAjB;;AAEA;;AAEA,aAASC,QAAT,CAAkBC,GAAlB,EAAuBC,IAAvB,EAA6B;AACzBH,mBAAWE,GAAX,IAAkBC,IAAlB;AACH;;AAED,aAASC,GAAT,CAAaF,GAAb,EAAkB;AACd,YAAIC,OAAOH,WAAWE,GAAX,CAAX;AACA,YAAIC,IAAJ,EAAU;AACN,mBAAOA,IAAP;AACH;AACJ;AACD,aAASE,MAAT,CAAgBH,GAAhB,EAAqB;AACjB,YAAIF,WAAWE,GAAX,CAAJ,EAAqB;AACjB,mBAAOF,WAAWE,GAAX,CAAP;AACH;AACJ;;AAED,WAAO;AACHD,kBAAUA,QADP;AAEHG,aAAKA,GAFF;AAGHC,gBAAQA,MAHL;AAIHL,oBAAYA;AAJT,KAAP;AAMH;;AAED,SAASM,MAAT,CAAgBC,YAAhB,EAA8BC,IAA9B,EAAoCC,OAApC,EAA6C;AACzC;AACA;AACA;AACA,QAAIC,UAAUC,OAAOC,OAAP,IAAkBD,OAAOE,eAAP,KAA2B,KAA7C,GAAqD,OAArD,GAA8D,EAA5E;AAAA,QACIV,IADJ;;AAGA,QAAGI,YAAH,EAAgB;AACZJ,eAAOW,SAASV,GAAT,CAAaM,UAAUH,YAAvB,CAAP;AACA,YAAIJ,IAAJ,EAAS;AACL,mBAAOA,KAAKY,KAAL,CAAW,IAAX,EAAiBC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAsC,CAAtC,CAAjB,CAAP;AACH;AACJ;AACD,WAAOZ,IAAP;AACH;;AAED;AACA,IAAIM,WAAWf,kBAAf;;AAEAsB,OAAOC,OAAP,GAAiB;AACbrB,cAAUa,SAASb,QADN;AAEbG,SAAKU,SAASV,GAFD;AAGbC,YAAQS,SAAST,MAHJ;AAIbL,gBAAYc,SAASd,UAJR;AAKbM,YAAQA;AALK,CAAjB","file":"functionRegistry.js","sourcesContent":["\r\nfunction functionRegistry() {\r\n    var dictionary = {};\r\n\r\n    // will set the value on an existing observable\r\n\r\n    function register(key, func) {\r\n        dictionary[key] = func;\r\n    }\r\n\r\n    function get(key) {\r\n        var func = dictionary[key];\r\n        if (func) {\r\n            return func;\r\n        }\r\n    }\r\n    function remove(key) {\r\n        if (dictionary[key]) {\r\n            delete dictionary[key];\r\n        }\r\n    }\r\n\r\n    return {\r\n        register: register,\r\n        get: get,\r\n        remove: remove,\r\n        dictionary: dictionary\r\n    };\r\n}\r\n\r\nfunction invoke(functionName, data, options) {\r\n    // IS_MOCK needs to be true in prototype and undefined or false in taskflow to make it Mock\r\n    // if IS_SERVICE_MOCK is false, then dont use mock keyword\r\n    // set IS_SERVICE_MOCK to false explicitly when testing, leave it undefined for IS_MOCK to work as desired in protoype and portal\r\n    var mockKey = window.IS_MOCK && window.IS_SERVICE_MOCK !== false ? 'mock.': '',\r\n        func;\r\n\r\n    if(functionName){\r\n        func = registry.get(mockKey + functionName);\r\n        if (func){\r\n            return func.apply(null, Array.prototype.slice.call(arguments, 1));\r\n        }\r\n    }\r\n    return data;\r\n}\r\n\r\n// create instance\r\nlet registry = functionRegistry();\r\n\r\nmodule.exports = {\r\n    register: registry.register,\r\n    get: registry.get,\r\n    remove: registry.remove,\r\n    dictionary: registry.dictionary,\r\n    invoke: invoke\r\n};\r\n"]}